<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>报文结构 | 前端知识</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="shortcut icon" type="image/x-icon" href="/frontend-knowledge/favicon.ico">
    <meta name="description" content="">
    
    <link rel="preload" href="/frontend-knowledge/assets/css/0.styles.9e6acaa8.css" as="style"><link rel="preload" href="/frontend-knowledge/assets/js/app.3b96e64d.js" as="script"><link rel="preload" href="/frontend-knowledge/assets/js/2.7b790d3e.js" as="script"><link rel="preload" href="/frontend-knowledge/assets/js/12.b20a6f24.js" as="script"><link rel="prefetch" href="/frontend-knowledge/assets/js/10.89b9ad5c.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/11.e5e5bc77.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/13.001a2207.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/14.af5ad140.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/15.4ad3b901.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/16.5711a985.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/17.228a6c4e.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/18.f1f11739.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/19.20202934.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/20.5d5d4a68.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/21.120a1bdc.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/22.5723f470.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/23.c1fa8a3a.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/24.9db9c86a.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/25.1f017b94.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/26.1d6a1fda.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/27.b63416a5.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/28.21e589cc.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/29.3bdd54bd.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/3.7c7ae8a5.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/30.2f652a07.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/31.771110d2.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/32.03ef91b3.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/33.edc2dd3e.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/34.ceb1b832.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/35.1e61a41c.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/36.5d11b26b.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/37.9665c710.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/38.9484fded.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/39.d85e07d8.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/4.d30af052.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/5.489c1fdf.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/6.1c319970.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/7.28ae093f.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/8.02f90ee2.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/9.608f29d6.js">
    <link rel="stylesheet" href="/frontend-knowledge/assets/css/0.styles.9e6acaa8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/frontend-knowledge/" class="home-link router-link-active"><!----> <span class="site-name">前端知识</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/3scarecrow/frontend-knowledge" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/3scarecrow/frontend-knowledge" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Home</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JavaScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend-knowledge/javascript/variable-and-type.html" class="sidebar-link">🔔 变量与类型</a></li><li><a href="/frontend-knowledge/javascript/execution-context.html" class="sidebar-link">🎭 执行上下文</a></li><li><a href="/frontend-knowledge/javascript/scope-chain-and-closure.html" class="sidebar-link">⚜️ 作用域链与闭包</a></li><li><a href="/frontend-knowledge/javascript/prototype-chain.html" class="sidebar-link">🔱 原型与原型链</a></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>执行机制</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend-knowledge/javascript/event-loop.html" class="sidebar-link">Event Loop</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>手写系列</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>计算机网络</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend-knowledge/network/dns.html" class="sidebar-link">DNS</a></li><li><a href="/frontend-knowledge/network/tcp.html" class="sidebar-link">TCP</a></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>HTTP</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend-knowledge/network/http/http.html" class="sidebar-link">HTTP</a></li><li><a href="/frontend-knowledge/network/http/message.html" aria-current="page" class="active sidebar-link">报文结构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-knowledge/network/http/message.html#请求行-状态行" class="sidebar-link">请求行 + 状态行</a></li><li class="sidebar-sub-header"><a href="/frontend-knowledge/network/http/message.html#请求方法" class="sidebar-link">请求方法</a></li><li class="sidebar-sub-header"><a href="/frontend-knowledge/network/http/message.html#状态码" class="sidebar-link">状态码</a></li></ul></li><li><a href="/frontend-knowledge/network/http/cache.html" class="sidebar-link">缓存</a></li></ul></section></li><li><a href="/frontend-knowledge/network/http2.html" class="sidebar-link">HTTP/2</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>性能</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>其他</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="报文结构"><a href="#报文结构" class="header-anchor">#</a> 报文结构</h1> <p>HTTP 协议的请求和响应报文的结构很类似，由三大部分组成:</p> <ol><li>起始行（start line）</li> <li>头部字段（header）</li> <li>消息正文（entity）</li></ol> <p>起始行和头部字段常合称为 &quot;<strong>请求头</strong>&quot; 或 &quot;<strong>响应头</strong>&quot;，即 <strong>header</strong>。消息正文称为 &quot;<strong>实体</strong>&quot;，即 <strong>body</strong></p> <h2 id="请求行-状态行"><a href="#请求行-状态行" class="header-anchor">#</a> 请求行 + 状态行</h2> <p>请求头结构如下:</p> <p><img src="/frontend-knowledge/assets/img/request-header.1fe4c112.png" alt="请求头结构"></p> <p>由上图可知：</p> <p><strong>请求行</strong>由三个部分组成:</p> <ol><li>请求方法: GET/POST/PUT 等</li> <li>请求目标: URI（唯一资源表示符），表示请求要操作的资源</li> <li>版本号: 报文使用的 HTTP 协议版本</li></ol> <p>例如:</p> <p><code>GET / HTTP/1.1</code></p> <p>该请求的请求方法为 <code>GET</code> ，请求目标为 <code>/</code>，请求的 HTTP 协议版本号为 <code>1.1</code></p> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>请求头（header）和请求体（body）之间用换行（CRLF）分隔，换行上面表示请求头，下面表示请求体的内容</p></div> <p>响应头结构如下:</p> <p><img src="/frontend-knowledge/assets/img/response-header.cb0d1d2c.png" alt="响应头结构"></p> <p>其中 <strong>状态行</strong> 也是由三部分组成:</p> <ol><li>版本号: 报文使用功能的 HTTP 协议版本</li> <li>状态码: 用三位数字码表示请求的处理结果</li> <li>原因: 作为数字码的解析文字</li></ol> <p>例如:</p> <p><code>HTTP/1.1 200 OK</code></p> <p>表示 HTTP 协议版本为 <code>1.1</code>，且服务器返回的状态码为 <code>200</code>（服务器成功处理了请求）</p> <p>在响应报文中响应头和响应体之间也是用换行分隔的。</p> <h2 id="请求方法"><a href="#请求方法" class="header-anchor">#</a> 请求方法</h2> <p>请求方法指的是要求服务器对 URI 资源执行某个动作</p> <p>HTTP/1.1 中有8种请求方法:</p> <ol><li>GET: 获取资源</li> <li>HEAD: 获取资源的元信息</li> <li>POST: 提交数据</li> <li>PUT: 修改数据</li> <li>DELETE: 删除资源</li> <li>CONNECT: 建立连接隧道</li> <li>OPTIONS: 列出可对资源实行的方法（常用作 CORS 预检请求）</li> <li>TRACE: 追踪请求-响应的传输路径</li></ol> <h3 id="get"><a href="#get" class="header-anchor">#</a> GET</h3> <p><strong>GET</strong> 表示从服务器获取资源，最为常用功能的请求方法</p> <h3 id="head"><a href="#head" class="header-anchor">#</a> HEAD</h3> <p><strong>HEAD</strong> 与 <strong>GET</strong> 方法类似，也是从服务器获取资源，但不同之处在于服务器不会返回请求的实体数据，只返回响应头，也就是资源的&quot;<strong>元信息</strong>&quot;</p> <p>主要用于不需要实体数据的请求，可以避免传输 body 数据的浪费，例如检查文件是否存在等</p> <h3 id="post"><a href="#post" class="header-anchor">#</a> POST</h3> <p><strong>POST</strong> 表示向指定的 URI 提交数据</p> <h3 id="put"><a href="#put" class="header-anchor">#</a> PUT</h3> <p><strong>PUT</strong> 的作用与 POST 类似，也可以向服务器提交数据，但 PUT 表示 &quot;修改&quot; 之意，而 POST 表示 &quot;新增&quot; 之意</p> <h3 id="options"><a href="#options" class="header-anchor">#</a> OPTIONS</h3> <p><strong>OPTIONS</strong> 要求服务器列出可对资源实行的操作方法，在响应头 Allow 字段里返回，常用于 CORS 的预检请求</p> <p>对于请求方法还有 <strong>安全与幂等</strong> 的概念</p> <p>在 HTTP 协议里的 &quot;<strong>安全</strong>&quot; 是指请求方法不会对服务器的资源造成实质的修改，一般来说 GET 和 HEAD 方法是安全的，语义上它们是 &quot;只读&quot; 操作，无论请求多少次，服务器上的资源都是不变的</p> <p>而 POST/PUT/DELETE 方法会修改服务器的资源，所以是 &quot;不安全&quot; 的</p> <p>而所谓 &quot;<strong>幂等</strong>&quot; 的意思是指多次执行所产生的影响与一次执行产生的影响相同</p> <p>GET/POST 方法显然是幂等的，DELETE 多次删除同一个资源，结果都是 &quot;资源不存在&quot;，所以也是幂等的</p> <p>而 POST 是新增数据，多次新增会创建多个资源，所以不是幂等的，而 PUT 是更新数据，多次更新资源与一次更新资源所产生的效果一样（不会创建多个资源），所以是幂等的</p> <h2 id="状态码"><a href="#状态码" class="header-anchor">#</a> 状态码</h2> <p>状态码在状态行中表示请求的处理结果，状态码有五类:</p> <ul><li><p>1xx: 提示信息，表示目前是协议处理的中间状态，还需要后续的操作</p></li> <li><p>2xx: 成功，报文已经收到并且被正确处理</p></li> <li><p>3xx: 重定向，资源位置发生变动，需要客户端重新发送请求</p></li> <li><p>4xx: 客户端错误，请求报文有误，服务器无法处理</p></li> <li><p>5xx: 服务器错误，服务器在处理请求时内部发生了错误</p></li></ul> <p>常用的状态码:</p> <h3 id="_1xx"><a href="#_1xx" class="header-anchor">#</a> 1xx</h3> <p><strong>101 Switching Protocols</strong>: 切换协议，表示客户端使用 <strong>Upgrade</strong> 头字段，要求在 HTTP 协议的基础上改成其他的协议继续通信，例如 WebSocket。如果服务器同意变更协议，就会返回状态码 101，之后的数据传输便不会再使用 HTTP了</p> <h3 id="_2xx"><a href="#_2xx" class="header-anchor">#</a> 2xx</h3> <ul><li><p><strong>200 OK</strong>: 最常见的成功状态码，表示服务器成功处理了请求</p></li> <li><p><strong>204 No Content</strong>: 同 200 基本相同，但响应头后没有 body 数据</p></li> <li><p><strong>206 Partical Content</strong> 是 HTTP 分块下载或断点续传的基础，在客户端发送 &quot;范围请求&quot; 获取资源的部分数据时出现，此时的响应的 body 的数据只是资源的一部分</p></li></ul> <h3 id="_3xx"><a href="#_3xx" class="header-anchor">#</a> 3xx</h3> <ul><li><p><strong>301 Moved Permanently</strong>: 永久重定向，表示此次请求的资源已经不存在，需要改用新的 URI 再次访问</p></li> <li><p><strong>302 Moved Temporarily</strong>: 临时重定向，表示请求的资源还在，只是暂时需要用另一个 URI 来访问</p></li></ul> <p>301 和 302 都会在响应头里使用字段 <strong>Location（标记了服务器要求重定向的 URI）</strong> 来指明将要跳转的 URI，浏览器都会重定向到新的 URI。</p> <p>例如启用新域名，服务器切换到新机器等，都应该返回 301，此时浏览器会做适当的优化，例如历史记录、更新书签等，下次就会直接用新的 URI 访问，省去了再次跳转的成本</p> <p>而如果是暂时的系统维护，只是暂时跳转到临时 URI，则应该返回 302，浏览器不会做缓存优化，下次访问还是用原 URI</p> <ul><li><strong>304 Not Modified</strong>: 用于 If-Modified-Since、If-None-Match等条件请求，当命中协商缓存时，返回该状态码，表示资源未修改</li></ul> <h3 id="_4xx"><a href="#_4xx" class="header-anchor">#</a> 4xx</h3> <p><strong>403 Forbidden</strong>: 服务器禁止访问资源</p> <p><strong>404 Not Found</strong>: 表示请求的资源在服务器上没有找到，，一般是请求的 URI 不存在</p> <p><strong>405 Method Not Allowed</strong>: 不允许使用某些请求方法操作资源，例如不允许 GET 只能 POST</p> <h3 id="_5xx"><a href="#_5xx" class="header-anchor">#</a> 5xx</h3> <p><strong>500 Internal Server Error</strong>: 服务器内部发生了错误，但具体什么错误无从得知</p> <p><strong>501 Not Implemented</strong>: 表示客户端请求的功能，服务器还未支持</p> <p><strong>502 Bad Gateway</strong>: 通常是服务器作为网关或者代理时返回的错误码，表示服务器自身工作正常，但访问后端服务器时发生了错误</p> <p><strong>503 Service Unavailable</strong>: 表示服务器当前繁忙，暂时无法响应服务</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">1/9/2021, 4:25:29 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/frontend-knowledge/network/http/http.html" class="prev">
        HTTP
      </a></span> <span class="next"><a href="/frontend-knowledge/network/http/cache.html">
        缓存
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/frontend-knowledge/assets/js/app.3b96e64d.js" defer></script><script src="/frontend-knowledge/assets/js/2.7b790d3e.js" defer></script><script src="/frontend-knowledge/assets/js/12.b20a6f24.js" defer></script>
  </body>
</html>
