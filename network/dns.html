<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DNS | 前端知识</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="shortcut icon" type="image/x-icon" href="/frontend-knowledge/favicon.ico">
    <meta name="description" content="">
    
    <link rel="preload" href="/frontend-knowledge/assets/css/0.styles.cfe501a9.css" as="style"><link rel="preload" href="/frontend-knowledge/assets/js/app.94920fe9.js" as="script"><link rel="preload" href="/frontend-knowledge/assets/js/2.bbdaf1c6.js" as="script"><link rel="preload" href="/frontend-knowledge/assets/js/17.ded0059b.js" as="script"><link rel="prefetch" href="/frontend-knowledge/assets/js/10.eed446fa.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/11.6f64ceae.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/12.822be152.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/13.1d46380b.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/14.444d2077.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/15.da3edc6c.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/16.436d14e3.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/18.7defbb09.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/19.5c9d195a.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/20.c73de29c.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/21.efcd3a86.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/22.86a1e067.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/23.64c7c51d.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/24.841f41c5.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/25.55c20d30.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/26.ccfa5cd4.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/27.51ea4934.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/28.ccb57ba6.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/29.2fa8a7ed.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/3.5dfaa497.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/30.9a38e0fb.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/31.36a7828b.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/32.94b96e10.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/33.f59bf518.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/34.347c317c.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/35.6f054e79.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/36.6bd3572f.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/37.3dfd5821.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/38.b5c0577e.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/4.0044888e.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/5.47745d7b.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/6.4390631f.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/7.5a15f89b.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/8.6c50572c.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/9.5dfec621.js">
    <link rel="stylesheet" href="/frontend-knowledge/assets/css/0.styles.cfe501a9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/frontend-knowledge/" class="home-link router-link-active"><!----> <span class="site-name">前端知识</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/3scarecrow/frontend-knowledge" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/3scarecrow/frontend-knowledge" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Home</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JavaScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend-knowledge/javascript/variable-and-type.html" class="sidebar-link">🔔 变量与类型</a></li><li><a href="/frontend-knowledge/javascript/execution-context.html" class="sidebar-link">🎭 执行上下文</a></li><li><a href="/frontend-knowledge/javascript/scope-chain-and-closure.html" class="sidebar-link">⚜️ 作用域链与闭包</a></li><li><a href="/frontend-knowledge/javascript/prototype-chain.html" class="sidebar-link">🔱 原型与原型链</a></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>执行机制</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend-knowledge/javascript/event-loop.html" class="sidebar-link">Event Loop</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>手写系列</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>计算机网络</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend-knowledge/network/dns.html" aria-current="page" class="active sidebar-link">DNS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-knowledge/network/dns.html#dns-解析过程" class="sidebar-link">DNS 解析过程</a></li><li class="sidebar-sub-header"><a href="/frontend-knowledge/network/dns.html#参考文章" class="sidebar-link">参考文章</a></li></ul></li><li><a href="/frontend-knowledge/network/tcp.html" class="sidebar-link">TCP</a></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>HTTP</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend-knowledge/network/http/http.html" class="sidebar-link">HTTP</a></li><li><a href="/frontend-knowledge/network/http/message.html" class="sidebar-link">报文结构</a></li><li><a href="/frontend-knowledge/network/http/cache.html" class="sidebar-link">缓存</a></li></ul></section></li><li><a href="/frontend-knowledge/network/http2.html" class="sidebar-link">HTTP/2</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>性能</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="dns"><a href="#dns" class="header-anchor">#</a> DNS</h1> <blockquote><p>DNS 用于描述将用户友好域名分配给唯一 IP 地址的系统的术语</p></blockquote> <p>简而言之 <strong>DNS</strong> 就是域名与 IP 关系的映射表，类似于电话簿是名称及其对应的电话号码的列表一样，因为 IP 地址是难以记忆的，所以我们只需要记住 URL 网站名称，然后让 DNS 通过将其映射到正确的 IP 就可以了</p> <h2 id="dns-解析过程"><a href="#dns-解析过程" class="header-anchor">#</a> DNS 解析过程</h2> <p>如果我们在浏览器地址栏输入 www.google.com 的话，那么 DNS 解析过程如下:</p> <p>首先要查找 DNS 记录，浏览器会先检查四个缓存</p> <ol><li><p><strong>检查浏览器缓存</strong>。浏览器会在固定期限内维护之前访问过的网站的 DNS 记录的存储库（chrome 可通过 chrome://net-internals/#dns 查看）。</p></li> <li><p><strong>检查操作系统缓存</strong>。如果它不在浏览器缓存中，则浏览器将对操作系统进行系统调用（Windows 上的 gethostname，不同操作系统，函数也不同）进行查询，该函数检查本地的 Hosts 是否存在 DNS 记录，因为该操作系统也维护 DNS 记录的缓存。</p></li> <li><p><strong>检查路由器缓存</strong>。如果不在计算机上， 则浏览器将与维护自己的 DNS 记录缓存的本地路由器通信。</p></li> <li><p><strong>检查 ISP 缓存</strong>。如果上面的所有步骤都失败了，浏览器将与 ISP（Internet Service Provider） 的缓存 DNS 服务器通信。</p></li></ol> <p>如果在缓存中找不到对应的 IP，则 ISP 的 DNS 服务器会发起 DNS 查询请求</p> <p>先说下 DNS 的体系结构以便了解 DNS 的查询过程</p> <blockquote><p>DNS 体系结构由<strong>分层的分布式数据库和一组协议定义</strong>。</p></blockquote> <p>其体系结构有基本对应的域名结构:</p> <ol><li><strong>根域名服务器（Root DNS Server）</strong>: 管理顶级域名服务器，返回 com、net、cn 等顶级域名服务器的 IP 地址</li> <li><strong>顶级域名服务器（Top-level DNS Server）</strong>: 管理各自域名下的权威域名服务器，例如 com 顶级域名服务器可以返回 google.com 域名服务器的 IP 地址</li> <li><strong>权威域名服务器（Authoritative DNS Server）</strong>: 管理各自域名下主机的 IP 地址，例如 google.com 权威域名服务器可以返回 www.google.com 的 IP 地址</li></ol> <p><img src="/frontend-knowledge/assets/img/structure2.24a6acf6.png" alt="DNS 体系结构"></p> <p>DNS 查询过程如下:</p> <ol><li>我们将 ISP 的 DNS 服务器称为 <strong>DNS 递归器</strong>，它将先向根服务器查询 com 顶级域名，而根域名服务器返回 com 顶级域名服务器的 IP 地址。</li> <li>之后向 com 顶级域名服务器发送请求查询 google.com ， com 顶级域名服务器返回 google.com 的权威域名服务器的 IP 地址。</li> <li>最后向 google.com 的权威域名服务器发送请求查询 www.google.com 的 IP 地址，www.google.com 权威域名服务器返回匹配的 IP 地址。</li></ol> <p>至此，DNS 查询过程就结束了。</p> <h2 id="参考文章"><a href="#参考文章" class="header-anchor">#</a> 参考文章</h2> <ul><li>透析 HTTP 协议-02 破冰篇-06 域名里有哪些门道？</li> <li><a href="https://medium.com/@maneesha.wijesinghe1/what-happens-when-you-type-an-url-in-the-browser-and-press-enter-bb0aa2449c1a" target="_blank" rel="noopener noreferrer">What happens when you type a URL in the browser and press enter?<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://webhostinggeeks.com/guides/dns/" target="_blank" rel="noopener noreferrer">Domain Name System<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/skyline75489/what-happens-when-zh_CN" target="_blank" rel="noopener noreferrer">当···时发生了什么？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">12/6/2020, 2:47:25 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/frontend-knowledge/browser/browser-cache.html" class="prev">
        浏览器缓存
      </a></span> <span class="next"><a href="/frontend-knowledge/network/tcp.html">
        TCP
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/frontend-knowledge/assets/js/app.94920fe9.js" defer></script><script src="/frontend-knowledge/assets/js/2.bbdaf1c6.js" defer></script><script src="/frontend-knowledge/assets/js/17.ded0059b.js" defer></script>
  </body>
</html>
