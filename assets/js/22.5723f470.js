(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{395:function(t,s,a){"use strict";a.r(s);var n=a(44),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"跨域"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#跨域"}},[t._v("#")]),t._v(" 跨域")]),t._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#跨域网络访问"}},[t._v("跨域网络访问")]),a("ul",[a("li",[a("a",{attrs:{href:"#jsonp"}},[t._v("JSONP")])]),a("li",[a("a",{attrs:{href:"#cors"}},[t._v("CORS")])]),a("li",[a("a",{attrs:{href:"#node-中间层"}},[t._v("Node 中间层")])])])]),a("li",[a("a",{attrs:{href:"#跨域脚本api访问"}},[t._v("跨域脚本API访问")]),a("ul",[a("li",[a("a",{attrs:{href:"#window-postmessage"}},[t._v("window.postMessage")])]),a("li",[a("a",{attrs:{href:"#document-domain"}},[t._v("document.domain")])]),a("li",[a("a",{attrs:{href:"#window-name"}},[t._v("window.name")])])])]),a("li",[a("a",{attrs:{href:"#跨域数据存储访问"}},[t._v("跨域数据存储访问")])]),a("li",[a("a",{attrs:{href:"#参考文章"}},[t._v("参考文章")])])])]),a("p"),t._v(" "),a("p",[t._v("跨域是由于浏览器的"),a("strong",[t._v("同源策略")]),t._v("的安全机制引起的，也就是说一个源的文档或页面不能访问另一个源的文档或页面。")]),t._v(" "),a("blockquote",[a("p",[t._v("同源策略是一个重要的安全策略，它用于限制一个 origin 的文档或者它加载的脚本如何能与另一个源的资源进行交互。它能帮助阻隔恶意文档，减少可能被攻击的媒介。")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),a("p",[a("strong",[t._v("跨域时请求是已经发送出去，且服务端能收到请求并正常返回结果，只是结果被浏览器拦截了")])])]),t._v(" "),a("p",[t._v("同源指的是"),a("strong",[t._v("协议")]),t._v("，"),a("strong",[t._v("域名")]),t._v("和"),a("strong",[t._v("端口")]),t._v("都相同的情况下才算同源，三者之一不同则被视为非同源")]),t._v(" "),a("p",[t._v("而浏览器的同源策略主要是为了限制以下三种非同源的情况：")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("网络请求")])]),t._v(" "),a("li",[a("strong",[t._v("脚本 API 访问")])]),t._v(" "),a("li",[a("strong",[t._v("数据存储")])])]),t._v(" "),a("p",[t._v("而我们能够解决的是 "),a("strong",[t._v("网络请求")]),t._v(" 和 "),a("strong",[t._v("脚本 API 访问")])]),t._v(" "),a("h2",{attrs:{id:"跨域网络访问"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#跨域网络访问"}},[t._v("#")]),t._v(" 跨域网络访问")]),t._v(" "),a("p",[t._v("跨域网络访问指的是与"),a("strong",[t._v("网络请求")]),t._v("相关的，例如 XMLHttpRequest 和 Fetch API 会受到同源策略的限制")]),t._v(" "),a("p",[t._v("解决方案：")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("CORS")])]),t._v(" "),a("li",[a("strong",[t._v("JSONP")])]),t._v(" "),a("li",[a("strong",[t._v("Node 中间层")])])]),t._v(" "),a("h3",{attrs:{id:"jsonp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jsonp"}},[t._v("#")]),t._v(" JSONP")]),t._v(" "),a("p",[t._v("由于通过 "),a("code",[t._v("<script>")]),t._v(" 标签引入的 js 是不受同源策略的限制的，当需要通信时，可将 "),a("code",[t._v("<srcipt>")]),t._v(" 的 src 属性指向一个需要访问的地址并提供一个回调函数来接收数据，该地址会将返回的数据作为该回调函数的参数并执行该函数，因此就可以在回调函数中获取数据了。")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("jsonp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" hasParam "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("indexOf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'?'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  url "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" hasParam "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'&'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'?'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'callback='")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" callback\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" key "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    url "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'&'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" key "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'='")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" script "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'script'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  script"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" url\n  script"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("async "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n  script"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text/javascript'")]),t._v("\n  document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br")])]),a("ul",[a("li",[a("p",[a("strong",[t._v("优点")]),t._v("：不受同源策略的限制，兼容性更好")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("缺点")]),t._v("：只支持 GET 请求而不支持 POST 等其他类型的请求")])])]),t._v(" "),a("h3",{attrs:{id:"cors"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cors"}},[t._v("#")]),t._v(" CORS")]),t._v(" "),a("p",[t._v("CORS（全称为跨域资源共享）是一种机制，该机制使用附加的 HTTP 头来告诉浏览器，哪些域名可以访问该资源")]),t._v(" "),a("p",[t._v("与 CORS 相关的 HTTP 响应头字段")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("Access-Control-Allow-Origin")]),t._v("：告知浏览器哪些域名（Origin）可以访问")]),t._v(" "),a("li",[a("strong",[t._v("Access-Control-Expose-Headers")]),t._v("：在跨域请求时，一般只能拿到一些最基本的响应头，若需获取特定响应头，可通过该字段暴露给浏览器")]),t._v(" "),a("li",[a("strong",[t._v("Access-Control-Allow-Methods")]),t._v("：哪些请求方法可被接受")]),t._v(" "),a("li",[a("strong",[t._v("Access-Control-Max-Age")]),t._v("：预检的存活时间")])]),t._v(" "),a("p",[t._v("浏览器将 CORS 请求分为"),a("strong",[t._v("简单请求")]),t._v("和"),a("strong",[t._v("复杂请求")])]),t._v(" "),a("h4",{attrs:{id:"简单请求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简单请求"}},[t._v("#")]),t._v(" 简单请求")]),t._v(" "),a("p",[t._v("简单请求不会触发 "),a("strong",[t._v("CORS 预检请求")]),t._v("，若请求满足所有下述条件可视为“简单请求”")]),t._v(" "),a("ul",[a("li",[t._v("使用下列方法之一\n"),a("ul",[a("li",[t._v("GET")]),t._v(" "),a("li",[t._v("HEAD")]),t._v(" "),a("li",[t._v("POST")])])]),t._v(" "),a("li",[t._v("部分首部\n"),a("ul",[a("li",[t._v("Accept")]),t._v(" "),a("li",[t._v("Accept-Language")]),t._v(" "),a("li",[t._v("Content-Language")]),t._v(" "),a("li",[t._v("Content-Type （需要注意额外的限制）")]),t._v(" "),a("li",[t._v("...")])])]),t._v(" "),a("li",[t._v("Content-Type 的值仅限于下列三者之一\n"),a("ul",[a("li",[t._v("text/plain（文本文件）")]),t._v(" "),a("li",[t._v("multipart/form-data（表单形式：二进制数据或数据较大）")]),t._v(" "),a("li",[t._v("application/x-www-form-urlencoded（表单形式：对载荷进行编码并序列化）")])])])]),t._v(" "),a("h4",{attrs:{id:"复杂请求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#复杂请求"}},[t._v("#")]),t._v(" 复杂请求")]),t._v(" "),a("p",[t._v("复杂请求需要在正式发起请求前需要发送一个"),a("strong",[t._v("预检请求")]),t._v("（OPTIONS 方法）到服务器，以获知服务器是否允许该实际请求，预检请求可以避免跨域请求对服务器产生未预期的影响（"),a("strong",[t._v("因为跨域时请求会发送到服务端且服务端会处理该请求并响应，只是响应被浏览器拦截了而已，因此才需要先发送预检请求")]),t._v("）")]),t._v(" "),a("h3",{attrs:{id:"node-中间层"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#node-中间层"}},[t._v("#")]),t._v(" Node 中间层")]),t._v(" "),a("p",[t._v("原理："),a("strong",[t._v("跨域问题是浏览器的同源策略的安全机制引起的，而服务器之间的相互调用是不受同源限制的，当前端和 Node 中间层在同一个域时，Node 中间层将前端的请求转发到真实的服务器，然后将请求返回的数据再传到前端，就可实现跨域")])]),t._v(" "),a("p",[t._v("Node 作为中间层的作用：")]),t._v(" "),a("ul",[a("li",[t._v("BFF（backend for frontend） 架构: 为前端提供统一规范的接口，并且可对后端返回的数据进行二次处理")]),t._v(" "),a("li",[t._v("控制路由逻辑")])]),t._v(" "),a("h2",{attrs:{id:"跨域脚本api访问"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#跨域脚本api访问"}},[t._v("#")]),t._v(" 跨域脚本API访问")]),t._v(" "),a("blockquote",[a("p",[t._v("JavaScript 的 API 中，如 "),a("code",[t._v("iframe.contentWindow")]),t._v("、"),a("code",[t._v("window.parent")]),t._v("、 "),a("code",[t._v("window.open")]),t._v(" 和 "),a("code",[t._v("window.opener")]),t._v(" 允许文档间直接相互引用。当两个文档的源不同时，这些引用将对 "),a("code",[t._v("Window")]),t._v(" 和 "),a("code",[t._v("Location")]),t._v(" 对象的访问添加限制。")])]),t._v(" "),a("p",[t._v("也就是说非同源的"),a("strong",[t._v("文档与文档（iframe）")]),t._v("、"),a("strong",[t._v("文档与页面")]),t._v("以及"),a("strong",[t._v("页面与页面")]),t._v("之间的访问也存在跨域的限制")]),t._v(" "),a("p",[t._v("解决方案：")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("window.postMessage")]),t._v("(推荐)")]),t._v(" "),a("li",[a("strong",[t._v("document.domain")])]),t._v(" "),a("li",[a("strong",[t._v("window.name")])])]),t._v(" "),a("h3",{attrs:{id:"window-postmessage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#window-postmessage"}},[t._v("#")]),t._v(" window.postMessage")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Window/postMessage",target:"_blank",rel:"noopener noreferrer"}},[t._v("window.postMessage"),a("OutboundLink")],1),t._v(" 是 HTML5 中的API，该方法可以安全的实现跨域通信，能够处理以下问题：")]),t._v(" "),a("ul",[a("li",[t._v("页面和其打开的新窗口的通信")]),t._v(" "),a("li",[t._v("页面与嵌套的 iframe 的通信")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 发送消息")]),t._v("\notherWindow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("postMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" targetOrigin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("transfer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 接收消息")]),t._v("\nwindow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'message'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" receiveMessage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),a("p",[t._v("接收消息时需要检查 origin 和 source 属性，否则会导致跨站点脚本攻击")])]),t._v(" "),a("h3",{attrs:{id:"document-domain"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#document-domain"}},[t._v("#")]),t._v(" document.domain")]),t._v(" "),a("p",[a("code",[t._v("document.domain")]),t._v(" 可解决二级域名相同的情况下的跨域问题，例如 "),a("code",[t._v("a.example.com")]),t._v(" 和 "),a("code",[t._v("b.example.com")]),t._v(" 等域名可使用该方式，通常用于处理页面与嵌套的 iframe 的通信，需要两个页面都设置 "),a("code",[t._v("document.domain")]),t._v(" 为相同二级域名即可实现跨域")]),t._v(" "),a("h3",{attrs:{id:"window-name"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#window-name"}},[t._v("#")]),t._v(" window.name")]),t._v(" "),a("p",[t._v("window.name 用来设置/获取窗口的名称，在页面设置的 name 属性，iframe 也可以访问，通过这个特性即可完成页面与 iframe 之间的跨域问题")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- a.example.com --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("iframe")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("b.example.com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("iframe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token script"}},[a("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\nwindow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'稻草人'")]),t._v("\n")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- b.example.com --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token script"}},[a("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 稻草人")]),t._v("\n")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("h2",{attrs:{id:"跨域数据存储访问"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#跨域数据存储访问"}},[t._v("#")]),t._v(" 跨域数据存储访问")]),t._v(" "),a("blockquote",[a("p",[t._v("访问存储在浏览器中的数据，是以源进行分割。每个源都拥有自己单独的存储空间，一个源中的 JavaScript 脚本不能对属于其他源的数据进行读写操作。")])]),t._v(" "),a("p",[t._v("浏览器存储包括：")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("sessionStorage")])]),t._v(" "),a("li",[a("strong",[t._v("localStorage")])]),t._v(" "),a("li",[a("strong",[t._v("IndexedDB")])]),t._v(" "),a("li",[a("strong",[t._v("Cookies")])])]),t._v(" "),a("h2",{attrs:{id:"参考文章"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[t._v("#")]),t._v(" 参考文章")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy",target:"_blank",rel:"noopener noreferrer"}},[t._v("浏览器的同源策略"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://segmentfault.com/a/1190000015597029",target:"_blank",rel:"noopener noreferrer"}},[t._v("不要再问我跨域的问题了"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/ljianshu/Blog/issues/55",target:"_blank",rel:"noopener noreferrer"}},[t._v("九种跨域方式实现原理（完整版）"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://stackoverflow.com/questions/4007969/application-x-www-form-urlencoded-or-multipart-form-data",target:"_blank",rel:"noopener noreferrer"}},[t._v("application/x-www-form-urlencoded or multipart/form-data?"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://juejin.im/post/6844903895030824974",target:"_blank",rel:"noopener noreferrer"}},[t._v("跨域解决方案之Node中间层"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);