<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>🔔 变量与类型 | 前端知识</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="shortcut icon" type="image/x-icon" href="/frontend-knowledge/favicon.ico">
    <meta name="description" content="">
    
    <link rel="preload" href="/frontend-knowledge/assets/css/0.styles.cfe501a9.css" as="style"><link rel="preload" href="/frontend-knowledge/assets/js/app.94920fe9.js" as="script"><link rel="preload" href="/frontend-knowledge/assets/js/2.bbdaf1c6.js" as="script"><link rel="preload" href="/frontend-knowledge/assets/js/36.6bd3572f.js" as="script"><link rel="prefetch" href="/frontend-knowledge/assets/js/10.eed446fa.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/11.6f64ceae.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/12.822be152.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/13.1d46380b.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/14.444d2077.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/15.da3edc6c.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/16.436d14e3.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/17.ded0059b.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/18.7defbb09.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/19.5c9d195a.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/20.c73de29c.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/21.efcd3a86.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/22.86a1e067.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/23.64c7c51d.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/24.841f41c5.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/25.55c20d30.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/26.ccfa5cd4.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/27.51ea4934.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/28.ccb57ba6.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/29.2fa8a7ed.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/3.5dfaa497.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/30.9a38e0fb.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/31.36a7828b.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/32.94b96e10.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/33.f59bf518.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/34.347c317c.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/35.6f054e79.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/37.3dfd5821.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/38.b5c0577e.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/4.0044888e.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/5.47745d7b.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/6.4390631f.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/7.5a15f89b.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/8.6c50572c.js"><link rel="prefetch" href="/frontend-knowledge/assets/js/9.5dfec621.js">
    <link rel="stylesheet" href="/frontend-knowledge/assets/css/0.styles.cfe501a9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/frontend-knowledge/" class="home-link router-link-active"><!----> <span class="site-name">前端知识</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/3scarecrow/frontend-knowledge" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/3scarecrow/frontend-knowledge" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Home</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>JavaScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend-knowledge/javascript/variable-and-type.html" aria-current="page" class="active sidebar-link">🔔 变量与类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-knowledge/javascript/variable-and-type.html#_1-语言类型" class="sidebar-link">1. 语言类型</a></li><li class="sidebar-sub-header"><a href="/frontend-knowledge/javascript/variable-and-type.html#_2-变量存储形式" class="sidebar-link">2. 变量存储形式</a></li><li class="sidebar-sub-header"><a href="/frontend-knowledge/javascript/variable-and-type.html#_3-数据类型判断" class="sidebar-link">3. 数据类型判断</a></li><li class="sidebar-sub-header"><a href="/frontend-knowledge/javascript/variable-and-type.html#_4-数据类型转换" class="sidebar-link">4. 数据类型转换</a></li><li class="sidebar-sub-header"><a href="/frontend-knowledge/javascript/variable-and-type.html#参考文章" class="sidebar-link">参考文章</a></li></ul></li><li><a href="/frontend-knowledge/javascript/execution-context.html" class="sidebar-link">🎭 执行上下文</a></li><li><a href="/frontend-knowledge/javascript/scope-chain-and-closure.html" class="sidebar-link">⚜️ 作用域链与闭包</a></li><li><a href="/frontend-knowledge/javascript/prototype-chain.html" class="sidebar-link">🔱 原型与原型链</a></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>执行机制</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend-knowledge/javascript/event-loop.html" class="sidebar-link">Event Loop</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>手写系列</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机网络</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>性能</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="变量与类型"><a href="#变量与类型" class="header-anchor">#</a> 🔔 变量与类型</h1> <h2 id="_1-语言类型"><a href="#_1-语言类型" class="header-anchor">#</a> 1. 语言类型</h2> <ul><li>原始类型
<ul><li>Undefined</li> <li>Null</li> <li>Boolean</li> <li>String</li> <li>BigInt: 是一种特殊的数字类型，能支持任意长度的整数</li> <li>Number</li> <li>Symbol</li></ul></li> <li>引用类型
<ul><li>Object</li></ul></li></ul> <h3 id="number"><a href="#number" class="header-anchor">#</a> Number</h3> <p>TODO</p> <h3 id="symbol"><a href="#symbol" class="header-anchor">#</a> Symbol</h3> <p><code>Symbol</code> 类型创建的值表示是唯一的标识符，该值能作为对象属性的标识符，这是该类型仅有的目的</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 1. name 作为 symbol 值的描述符，仅有调试作用</span>
<span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">)</span>
<span class="token comment">// 2. symbol 值作为对象的属性</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'scarecrow'</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>age<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">'18'</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// { name: &quot;scarecrow&quot;, Symbol(age): &quot;18&quot; }</span>
<span class="token comment">// 3. 访问对象的 symbol 属性需通过动态属性方式访问</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>age<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>如果想创建或者访问全局或者跨域都可用的 symbol，可通过 <code>Symbol.for()</code> 方法和 <code>Symbol.keyFor()</code> 方法从 <code>全局的Symbol 注册表</code> 中注册或获取相应的 symbol</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> age <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">)</span> <span class="token comment">// 如果全局注册表没有 age 描述符对应的symbol，则创建它</span>
<span class="token keyword">const</span> symbol1 <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">)</span> <span class="token comment">// 如果全局注册表存在 age 描述符对应的 symbol，则返回它</span>
<span class="token keyword">const</span> symbol2 <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>symbol1 <span class="token operator">===</span> symbol2<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="symbol-作用"><a href="#symbol-作用" class="header-anchor">#</a> Symbol 作用</h4> <h5 id="隐藏对象属性"><a href="#隐藏对象属性" class="header-anchor">#</a> 隐藏对象属性</h5> <p>当开发一个库或者组件时，可能一些内置的属性不希望被其他使用者访问，防止使用者改变其属性，此时对象的属性可使用 symbol 值作为唯一值。我们不可通过 <code>for...in</code> 或其他遍历对象的方法来遍历对象的 symbol 属性，因此可以隐藏对象的属性</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'scarecrow'</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>age<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">'18'</span>
<span class="token punctuation">}</span>
Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// [&quot;name&quot;]</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token comment">// 仅打印 name</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>虽然 Symbol 可以隐藏对象的属性，但是还是可以通过 <code>Object.getOwnPropertySymbols(obj)</code> 来获取对象的所有的 Symbol 属性集合</p></div> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'scarecrow'</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>age<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">'18'</span>
<span class="token punctuation">}</span>
Object<span class="token punctuation">.</span><span class="token function">getOwnPropertySymbols</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// [Symbol(age)]</span>
<span class="token comment">// 即使不通过 obj[age] 也能获取 对象的 symbol 属性</span>
obj<span class="token punctuation">[</span>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertySymbols</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token comment">// &quot;18&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="object"><a href="#object" class="header-anchor">#</a> Object</h3> <p>JavaScript 中有一些 Object 派生出来的内置引用类型</p> <ul><li>基本包装类型
<ul><li>String</li> <li>Number</li> <li>Boolean</li></ul></li> <li>其他类型
<ul><li>Function</li> <li>Array</li> <li>Date</li> <li>RegExp</li></ul></li></ul> <h2 id="_2-变量存储形式"><a href="#_2-变量存储形式" class="header-anchor">#</a> 2. 变量存储形式</h2> <p>原始类型和引用类型在内存空间中的存储是不一样的，原始类型的值被存储在<strong>栈空间</strong>里，而引用类型的值被分配到<strong>堆空间</strong>，而在<strong>栈空间</strong>里存储引用类型的值在<strong>堆空间</strong>的地址，当访问引用类型时，需要先在<strong>栈空间</strong>中找到其在<strong>堆空间</strong>的地址，再通过该地址去<strong>堆空间</strong>中找到引用类型的值</p> <p>TODO</p> <h2 id="_3-数据类型判断"><a href="#_3-数据类型判断" class="header-anchor">#</a> 3. 数据类型判断</h2> <h3 id="_3-1-typeof"><a href="#_3-1-typeof" class="header-anchor">#</a> 3.1 typeof</h3> <ul><li>可判断原始类型（除 null 外）</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">typeof</span> <span class="token keyword">null</span> <span class="token comment">// 'object'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>不可判断具体的引用类型（除 function 外）</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token function-variable function">arrow</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">let</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> regexp <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\w</span><span class="token regex-delimiter">/</span></span>
<span class="token keyword">typeof</span> arrow <span class="token comment">// 'function'</span>
<span class="token keyword">typeof</span> array <span class="token comment">// 'object'</span>
<span class="token keyword">typeof</span> regexp <span class="token comment">// 'object'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_3-2-instanceof"><a href="#_3-2-instanceof" class="header-anchor">#</a> 3.2 instanceof</h3> <blockquote><p>instanceof 运算符用于检测构造函数的 prototype 属性是否出现在某个实例对象的原型链上。 -- MDN</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>object <span class="token keyword">instanceof</span> <span class="token class-name">constructor</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>object</code> 表示实例对象，而 <code>constructor</code> 表示构造函数</p> <ul><li>instanceof 仅能用于判断引用类型（包括通过基本包装类型创建的实例对象）</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// instanceof 无法判断不是通过基本包装类型创建的原始类型值</span>
<span class="token keyword">let</span> simplyStr <span class="token operator">=</span> <span class="token string">'simplyStr'</span>
<span class="token keyword">let</span> packageStr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">'str'</span><span class="token punctuation">)</span>
simplyStr <span class="token keyword">instanceof</span> <span class="token class-name">String</span> <span class="token comment">// false</span>
packageStr <span class="token keyword">instanceof</span> <span class="token class-name">String</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>不能判断是否是普通对象</li></ul> <p>因为其他引用类型都是Object类型派生出来的，因此他们的创建的实例对象的原型链上都有 <code>Object.prototype</code> 属性</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> object <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
array <span class="token keyword">instanceof</span> <span class="token class-name">Array</span> <span class="token comment">// true</span>
array <span class="token keyword">instanceof</span> <span class="token class-name">Object</span> <span class="token comment">// true</span>
object <span class="token keyword">instanceof</span> <span class="token class-name">Object</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_3-3-construcor"><a href="#_3-3-construcor" class="header-anchor">#</a> 3.3 construcor</h3> <p>constructor 用于判断实例对象的构造属性（constructor）是否等于其构造函数</p> <ul><li>可用于判断原始类型（除 null  和 undefined外）和引用类型</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">'str'</span>
<span class="token keyword">let</span> object <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">let</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
str<span class="token punctuation">.</span>constructor <span class="token operator">===</span> String <span class="token comment">// true</span>
object<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Object <span class="token comment">// true</span>
array<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Object <span class="token comment">// false</span>
<span class="token keyword">null</span><span class="token punctuation">.</span>constructor <span class="token operator">===</span> Null <span class="token comment">// Uncaught TypeError: Cannot read property 'constructor' of null</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>实例对象的 constructor 属性是可更改的，所以通过实例对象的constructor属性来判断不安全</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> object <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
object<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Function
object<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Object <span class="token comment">// false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_3-4-object-prototype-tostring-call"><a href="#_3-4-object-prototype-tostring-call" class="header-anchor">#</a> 3.4 Object.prototype.toString.call</h3> <p>为了每个对象都能通过 <code>Object.prototype.toString.call</code> 来检测，需借助函数的 <code>call</code> 来调用</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">'str'</span>
<span class="token keyword">let</span> object<span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
str<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// str</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token comment">// [object String]</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'[object Object]'</span> <span class="token comment">// true</span>

<span class="token comment">// 可进行字符截取</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'Object'</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>该方式可用于判断任意类型</li></ul> <h2 id="_4-数据类型转换"><a href="#_4-数据类型转换" class="header-anchor">#</a> 4. 数据类型转换</h2> <p>先看一小段代码</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a
a <span class="token operator">=</span> <span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>可以看出 JavaScript 中变量的数据类型是可以随意改变的，而无需像 C 语言等需要在使用之前就确定好变量的类型，之后便不可在变更变量的类型咯。<strong>像这种在使用之前就需要先确定其变量的数据类型的称为静态类型语言</strong>，<strong>而在编译阶段不能确定变量的数据类型的，需要在运行阶段才能确定的称为动态类型语言</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span>
a <span class="token operator">=</span> <span class="token string">'1'</span> <span class="token operator">+</span> <span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>在上面代码中，可以将变量的数据类型隐式地从数字类型转换为字符串类型称为<strong>隐式类型转换</strong>，而<strong>支持隐式类型转换的语言称为弱类型语言</strong>，相反地，<strong>不支持隐式类型转换的语言称为强类型语言</strong></p> <p>由上述可知， JavaScript 是一种<strong>弱类型的</strong>，<strong>动态的</strong>的语言</p> <h3 id="_4-1-抽象值操作"><a href="#_4-1-抽象值操作" class="header-anchor">#</a> 4.1 抽象值操作</h3> <p>抽象值操作指的是在数据类型转换时的转换规则</p> <h4 id="_4-1-1-tostring"><a href="#_4-1-1-tostring" class="header-anchor">#</a> 4.1.1 ToString</h4> <p>ToString 运算符根据下表将其参数转换为字符串类型的值：</p> <table><thead><tr><th>参数类型</th> <th style="text-align:center;">转换结果</th></tr></thead> <tbody><tr><td>Undefined</td> <td style="text-align:center;">返回 <strong>&quot;undefined&quot;</strong></td></tr> <tr><td>Null</td> <td style="text-align:center;">返回 <strong>&quot;null&quot;</strong></td></tr> <tr><td>Boolean</td> <td style="text-align:center;">若参数为 <strong>true</strong>，返回 <strong>&quot;true&quot;</strong>; 若参数为 <strong>false</strong>，返回 <strong>&quot;false&quot;</strong></td></tr> <tr><td>Number</td> <td style="text-align:center;">返回相应的字符串</td></tr> <tr><td>String</td> <td style="text-align:center;">返回原值（不转换）</td></tr> <tr><td>Symbol</td> <td style="text-align:center;">抛出 <strong>TypeError</strong> 异常</td></tr> <tr><td>Object</td> <td style="text-align:center;">调用 <a href="#_4-1-4-toprimitive">ToPrimitive</a> 方法</td></tr></tbody></table> <h4 id="_4-1-2-tonumber"><a href="#_4-1-2-tonumber" class="header-anchor">#</a> 4.1.2 ToNumber</h4> <p>ToNumber 运算符根据下表将其参数转换为数值类型的值：</p> <table><thead><tr><th>参数类型</th> <th style="text-align:center;">转换结果</th></tr></thead> <tbody><tr><td>Undefined</td> <td style="text-align:center;">返回 <strong>&quot;NaN&quot;</strong></td></tr> <tr><td>Null</td> <td style="text-align:center;">返回 <strong>&quot;+0&quot;</strong></td></tr> <tr><td>Boolean</td> <td style="text-align:center;">若参数为 <strong>true</strong>，返回 <strong>1</strong>; 若参数为 <strong>false</strong>，返回 <strong>+0</strong></td></tr> <tr><td>Number</td> <td style="text-align:center;">返回原值（不转换）</td></tr> <tr><td>String</td> <td style="text-align:center;">字符串进行 <code>trim()</code>操作后，如果是纯数字，则返回<strong>纯数字</strong>；否则，如果是空字符串，则返回 <strong>0</strong>；否则返回 <strong>NaN</strong></td></tr> <tr><td>Symbol</td> <td style="text-align:center;">抛出 <strong>TypeError</strong> 异常</td></tr> <tr><td>Object</td> <td style="text-align:center;">调用 <a href="#_4-1-4-toprimitive">ToPrimitive</a> 方法</td></tr></tbody></table> <h4 id="_4-1-3-toboolean"><a href="#_4-1-3-toboolean" class="header-anchor">#</a> 4.1.3 ToBoolean</h4> <p>ToBoolean 运算符根据下表将其参数转换为布尔值类型的值：</p> <table><thead><tr><th>参数类型</th> <th style="text-align:center;">转换结果</th></tr></thead> <tbody><tr><td>Undefined</td> <td style="text-align:center;">返回 <strong>false</strong></td></tr> <tr><td>Null</td> <td style="text-align:center;">返回 <strong>false</strong></td></tr> <tr><td>Boolean</td> <td style="text-align:center;">返回原值（不转换）</td></tr> <tr><td>Number</td> <td style="text-align:center;">如果参数为 <strong>+0</strong>，<strong>-0</strong> 或者 <strong>NaN</strong>，返回 <strong>false</strong>；否则 <strong>true</strong></td></tr> <tr><td>String</td> <td style="text-align:center;">如果参数为空字符，返回 <strong>false</strong>；否则返回 <strong>true</strong></td></tr> <tr><td>Symbol</td> <td style="text-align:center;">返回 <strong>true</strong></td></tr> <tr><td>Object</td> <td style="text-align:center;">返回 <strong>true</strong></td></tr></tbody></table> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>简记：undefined、null、''、+0、-0以及 NaN 都会被转换为 false，其他的值都是 true</p></div> <h4 id="_4-1-4-toprimitive"><a href="#_4-1-4-toprimitive" class="header-anchor">#</a> 4.1.4 ToPrimitive</h4> <p>当需要将对象转换为原始值时，JavaScript 就会调用对象的内置 <code>ToPrimitive</code> 方法进行转换，转换步骤如下：</p> <ol><li>调用 <code>Symbol.toPrimitive(hint)</code> 方法，如果该方法存在的话</li> <li>否则，如果 hint 是 <code>&quot;string&quot;</code>，则先调用 <code>toString</code> 是否返回原始值，否则调用 <code>valueOf</code> 是否返回原始值，否则抛出 <code>TypeError</code> 异常</li> <li>否则，如果 hint 是 <code>&quot;number&quot;</code>，则先调用 <code>valueOf</code> 是否返回原始值，否则调用 <code>toString</code> 是否返回原始值，否则抛出 <code>TypeError</code> 异常</li></ol> <p><code>hint</code> 表示要转换到的原始值的预期类型，有 “<strong>变体</strong>” 之意。<code>hint</code> 有三个值：<code>&quot;string&quot;</code>、<code>&quot;number&quot;</code> 和 <code>&quot;default&quot;</code>。其中 <code>&quot;default&quot;</code> 的行为基本和 <code>&quot;number&quot;</code> 类似</p> <ul><li>重写 <code>Symbol.toPrimitive(hint)</code></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// 显示类型转换</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// NaN</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [object Object]</span>

<span class="token keyword">let</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toPrimitive<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">hint</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>hint <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token number">3</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>hint <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">'scarecrow'</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 优先调用 Symbol.toPrimitive</span>
  <span class="token comment">// toString 和 valueOf 将不会被调用</span>
  <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'toString'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'valueOf'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 对象转换为数值型 hint 为 number</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span>obj2<span class="token punctuation">)</span><span class="token punctuation">)</span>     <span class="token comment">// 3</span>
<span class="token comment">// 对象转换为字符串型 hint 为 string</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span>obj2<span class="token punctuation">)</span><span class="token punctuation">)</span>     <span class="token comment">// scarecrow</span>
<span class="token comment">// 对象不知要被转换为什么类型 hint 为 default</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj2 <span class="token operator">+</span> <span class="token string">''</span><span class="token punctuation">)</span>        <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><ul><li>hint 值不同， <code>toString</code> 和 <code>valueOf</code> 被调用的顺序不同</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'scarecrow'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">3</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 对象转换为数值型时 hint 为 number，优先调用 valueOf</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">+</span>obj<span class="token punctuation">)</span>      <span class="token comment">// 3</span>
<span class="token comment">// 对象转换为字符串型时 hint 为 string，优先调用 toString</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>obj<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>  <span class="token comment">// scarecrow</span>
<span class="token comment">// 对象不知被转换为什么类型时 hint 为 default，同 number 一样，优先调用 valueOf</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj <span class="token operator">+</span> <span class="token string">''</span><span class="token punctuation">)</span>  <span class="token comment">// 3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li><code>toString</code> 和 <code>valueOf</code> 都没有返回原始值则抛出 <code>TypeError</code></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// Uncaught TypeError: Cannot convert object to primitive value</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">+</span>obj<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_4-2-显式强制类型转换"><a href="#_4-2-显式强制类型转换" class="header-anchor">#</a> 4.2 显式强制类型转换</h3> <blockquote><p>显式强制类型转换是那些显而易见的类型转换</p></blockquote> <p>显示强制类型转换使得类型转换更清晰，代码可读性更高</p> <h4 id="_4-2-1-显示强制类型转换为字符串类型"><a href="#_4-2-1-显示强制类型转换为字符串类型" class="header-anchor">#</a> 4.2.1 显示强制类型转换为字符串类型</h4> <p>显示强制类型转换为字符串类型遵循 <a href="#_4-1-1-tostring">ToString</a> 规则，在以下情况会发生转换：</p> <ol><li>String(val)</li> <li>val.toString()</li></ol> <h4 id="_4-2-2-显示强制类型转换为数值类型"><a href="#_4-2-2-显示强制类型转换为数值类型" class="header-anchor">#</a> 4.2.2 显示强制类型转换为数值类型</h4> <p>显示强制类型转换为字符串类型遵循 <a href="#_4-1-2-tonumber">ToNumber</a> 规则，在以下情况会发生转换：</p> <ol><li>Number(val)</li> <li>+val</li></ol> <h4 id="_4-2-3-显示强制类型转换为布尔类型"><a href="#_4-2-3-显示强制类型转换为布尔类型" class="header-anchor">#</a> 4.2.3 显示强制类型转换为布尔类型</h4> <p>显示强制类型转换为布尔类型遵循 <a href="#_4-1-3-toboolean">ToBoolean</a> 规则，在以下情况会发生转换：</p> <ol><li>Boolean(val)</li> <li>!!val</li></ol> <h3 id="_4-3-隐式强制类型转换"><a href="#_4-3-隐式强制类型转换" class="header-anchor">#</a> 4.3 隐式强制类型转换</h3> <blockquote><p>隐式强制类型转换指的是那些隐蔽的强制类型转换，副作用也不是很明显</p></blockquote> <p>隐式强制类型转换的作用是减少冗余，让代码更简洁，但存在一些副作用</p> <h4 id="_4-3-1-隐式强制类型转换为字符串类型"><a href="#_4-3-1-隐式强制类型转换为字符串类型" class="header-anchor">#</a> 4.3.1 隐式强制类型转换为字符串类型</h4> <p>隐式强制类型转换为字符串类型遵循 <a href="#_4-1-1-tostring">ToString</a> 规则，在以下情况会发生转换：</p> <ol><li>加号运算符</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1'</span> <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// &quot;10&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token comment">// &quot;1&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_4-3-2-隐式强制类型转换为数值类型"><a href="#_4-3-2-隐式强制类型转换为数值类型" class="header-anchor">#</a> 4.3.2 隐式强制类型转换为数值类型</h4> <p>隐式强制类型转换为数值类型遵循 <a href="#_4-1-2-tonumber">ToNumber</a> 规则，在以下情况会发生转换：</p> <ol><li>除加号外的其他运算符</li></ol> <p>除加号外的其他运算符只能进行数值的运算，所以会被转换为数值类型</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1'</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1'</span> <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1'</span> <span class="token operator">/</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
<span class="token comment">// 1. 首先两个数组根据 ToPrimitive 规则分别被转换为字符串类型 &quot;2&quot; 和 &quot;1&quot;</span>
<span class="token comment">// 2. 减法运算操作将两个字符串类型转换为 2 和 1，结果就等于 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="_4-3-3-隐式强制类型转换为布尔类型"><a href="#_4-3-3-隐式强制类型转换为布尔类型" class="header-anchor">#</a> 4.3.3 隐式强制类型转换为布尔类型</h4> <p>隐式强制类型转换为布尔类型遵循 <a href="#_4-1-3-toboolean">ToBoolean</a> 规则，在以下情况会发生转换：</p> <ol><li>if (..)</li> <li>for (..;..;..) 语句中的条件判断表达式</li> <li>whild (..) 和 do..whild(..) 循环中的条件判断表达式</li> <li>? : 三元表达式的条件判断</li> <li>逻辑运算法 || 和 &amp;&amp; 左边的操作数</li></ol> <h3 id="_4-4-抽象相等比较算法"><a href="#_4-4-抽象相等比较算法" class="header-anchor">#</a> 4.4 抽象相等比较算法</h3> <p>抽象相等比较指的是通过 '==' 来比较两个值，由于在比较过程会进行隐式强制类型转换，所以需要弄清楚在比较过程发生的转换规则，比较会按如下方式进行</p> <p>比较 <strong>x == y</strong> 是否抽象相等</p> <ol><li>若 <strong>Type(x)</strong> 与 <strong>Type(y)</strong> 相同
<ul><li>若 <strong>Type(x)</strong> 为 <strong>Undefined</strong>，则返回 <strong>true</strong></li> <li>若 <strong>Type(x)</strong> 为 <strong>Null</strong>，则返回 <strong>true</strong></li> <li>若 <strong>Type(x)</strong> 为 <strong>Number</strong>，则
<ul><li>若 <strong>x</strong> 为 <strong>NaN</strong>，则返回 <strong>false</strong></li> <li>若 <strong>y</strong> 为 <strong>NaN</strong>，则返回 <strong>false</strong></li> <li>若 <strong>x</strong> 与 <strong>y</strong> 为相等值，则返回 <strong>true</strong></li> <li>若 <strong>x</strong> 为 <strong>+0</strong> 且 <strong>y</strong> 为 <strong>-0</strong>，则返回 <strong>true</strong></li> <li>若 <strong>x</strong> 为 <strong>-0</strong> 且 <strong>y</strong> 为 <strong>+0</strong>，则返回 <strong>true</strong></li> <li>返回 <strong>false</strong></li></ul></li> <li>若 <strong>Type(x)</strong> 为 <strong>String</strong>，则当 <strong>x</strong> 和 <strong>y</strong> 为完成相同的字符序列时返回 <strong>true</strong>，否则返回 <strong>false</strong></li> <li>若 <strong>Type(x)</strong> 为 <strong>Boolean</strong>，则 <strong>x</strong> 和 <strong>y</strong> 同为 <strong>true</strong> 或同为 <strong>false</strong> 时返回 <strong>true</strong>，否则返回 <strong>false</strong></li> <li>当 <strong>x</strong> 和 <strong>y</strong> 为引用同一对象时返回 <strong>true</strong>，否则返回 <strong>false</strong></li></ul></li> <li>若 <strong>x</strong> 为 <strong>null</strong> 且 <strong>y</strong> 为 <strong>undefined</strong>，返回 <strong>true</strong></li> <li>若 <strong>x</strong> 为 <strong>undefined</strong> 且 <strong>y</strong> 为 <strong>null</strong>，返回 <strong>true</strong></li> <li>若 <strong>Type(x)</strong> 为 <strong>Number</strong> 且 <strong>Type(y)</strong> 为 <strong>String</strong>，返回 <strong>x == ToNumber(y)</strong> 的结果</li> <li>若 <strong>Type(x)</strong> 为 <strong>String</strong> 且 <strong>Type(y)</strong> 为 <strong>Number</strong>，返回 <strong>ToNumber(x) == y</strong> 的结果</li> <li>若 <strong>Type(x)</strong> 为 <strong>Boolean</strong>，返回 <strong>ToNumber(x) == y</strong> 的结果</li> <li>若 <strong>Type(y)</strong> 为 <strong>Boolean</strong>，返回 <strong>x == ToNumber(y)</strong> 的结果</li> <li>若 <strong>Type(x)</strong> 为 <strong>String</strong> 或 <strong>Number</strong>，且 <strong>Type(y)</strong> 为 <strong>Object</strong>，返回 <strong>x == ToPrimitive(y)</strong> 的结果</li> <li>若 <strong>Type(x)</strong> 为 <strong>Object</strong> 且 <strong>Type(y)</strong> 为 <strong>String</strong> 或 <strong>Number</strong>，返回 <strong>ToPrimitive(x) == y</strong> 的结果</li> <li>返回 <strong>false</strong></li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token boolean">true</span> <span class="token operator">==</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">// true</span>
<span class="token comment">// 1. 根据第6点，布尔类型 true 先被转换为数值类型，</span>
<span class="token comment">// 2. 然后根据第8点对象类型被转换字符类型 &quot;1&quot;，</span>
<span class="token comment">// 3. 最后根据第4点字符类型 &quot;1&quot; 被转换为 1，返回比较结果</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>还有比较有意思的题</p> <p><a href="https://github.com/YvetteLau/Step-By-Step/issues/9" target="_blank" rel="noopener noreferrer">如何让a == 1 &amp;&amp; a == 2 &amp;&amp; a == 3 的值为 true?<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <details class="custom-block details"><summary>点击查看代码</summary> <ol><li>重写 Number 包装对象的 valueOf 方法</li></ol> <div class="language-JS line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span>
<span class="token class-name">Number</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">valueOf</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> i<span class="token operator">++</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol start="2"><li>重写对象的 Symbol.toPrimitive 方法</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toPrimitive<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token operator">++</span>i
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token comment">// [Symbol.toPrimitive]: ((i) =&gt; () =&gt; ++i) (0)</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></details> <h2 id="参考文章"><a href="#参考文章" class="header-anchor">#</a> 参考文章</h2> <ul><li><a href="https://time.geekbang.org/column/article/129596" target="_blank" rel="noopener noreferrer">浏览器工作原理与实践-栈空间和堆空间：数据是如何存储的？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://wangdoc.com/javascript/features/conversion.html" target="_blank" rel="noopener noreferrer">数据类型的转换<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh.javascript.info/object-toprimitive" target="_blank" rel="noopener noreferrer">对象 — 原始值转换<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://www.ecma-international.org/ecma-262/7.0/#sec-toprimitive" target="_blank" rel="noopener noreferrer">ECMA-toprimitive<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://yanhaijing.com/es5/#201" target="_blank" rel="noopener noreferrer">抽象相等比较算法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>你不知道的JavaScript（中卷） 第四章 类型转换</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">12/6/2020, 2:40:11 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/frontend-knowledge/" class="prev router-link-active">
        README
      </a></span> <span class="next"><a href="/frontend-knowledge/javascript/execution-context.html">
        🎭 执行上下文
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/frontend-knowledge/assets/js/app.94920fe9.js" defer></script><script src="/frontend-knowledge/assets/js/2.bbdaf1c6.js" defer></script><script src="/frontend-knowledge/assets/js/36.6bd3572f.js" defer></script>
  </body>
</html>
